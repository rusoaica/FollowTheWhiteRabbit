<!DOCTYPE html>
<html lang="en-US">
	<head>
		<meta charset="UTF-8">
		<meta name="author" content="rusoaica" />
		<meta name="keywords" content="concatenation, concatenator operator, string operations, string variable type, stringbuilder" />
		<meta name="description" content="StringBuilder is a class that serves to build and change strings. It overcomes the performance problems that arise when concatenating strings of type string." />
		<meta name='robots' content='index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1' />
		<meta name="msapplication-TileImage" content="../../common/images/icon270x270.jpg" />
		<meta name="viewport" content="width=device-width">
		
		<meta property="og:locale" content="en_US" />
		<meta property="og:locale:alternate" content="en_US" />
		<meta property="og:type" content="article" />
		<meta property="og:title" content="String Builder - Follow the white rabbit" />
		<meta property="og:description" content="StringBuilder is a class that serves to build and change strings. It overcomes the performance problems that arise when concatenating strings of type string." />
		<meta property="og:url" content="./strings-and-text-processing/string-builder/" />
		<meta property="og:site_name" content="Follow the white rabbit" />
		<meta property="article:publisher" content="https://www.facebook.com/theyarewatchingyouneo" />
		<meta property="article:published_time" content="2017-04-21T07:08:24+00:00" />
		<meta property="article:modified_time" content="2017-04-21T07:08:24+00:00" />
		<meta property="og:image" content="./img_607d35446ecb2.png" />

		<link rel="stylesheet" href="../../common/styles/style.css" type="text/css" media="screen" />
		<link rel="stylesheet" href="../../common/styles/terms.css" type="text/css" media="screen" />
		<link rel="stylesheet" href="../../common/styles/csharp.css" type="text/css" media="screen" />
		
		<link rel="alternate" href="../../strings-and-text-processing/string-builder/" hreflang="en" />
		<link rel="alternate" href="../../siruri-de-caractere-si-procesarea-de-text/string-builder/" hreflang="ro" />
		
		<link rel="icon" href="../../common/images/icon32x32.jpg" sizes="32x32" />
		<link rel="icon" href="../../common/images/icon192x192.jpg" sizes="192x192" />
		<link rel="apple-touch-icon" href="../../common/images/icon180x180.jpg" />

		<title>
			String Builder - Follow the white rabbit
		</title>
	</head>
	<body>
		<input type="checkbox" id="hamburger-input" class="burger-shower" />
        <label id="hamburger-menu" for="hamburger-input">
			<img src="../../common/images/tools.png" style="width: 40px; height: 38px; margin-left: 3px; margin-top: 3px;"/>
			<nav id="mobile-menu">
				<div id="mobile-menu-content">
					<div class="mobile-menu-heading"> 
						Read this in
					</div>
					<ul>
						<li>
							<a lang="en-US" hreflang="en-US" href="../../strings-and-text-processing/string-builder/">
								<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAALCAMAAABBPP0LAAAAmVBMVEViZsViZMJiYrf9gnL8eWrlYkjgYkjZYkj8/PujwPybvPz4+PetraBEgfo+fvo3efkydfkqcvj8Y2T8UlL8Q0P8MzP9k4Hz8/Lu7u4DdPj9/VrKysI9fPoDc/EAZ7z7IiLHYkjp6ekCcOTk5OIASbfY/v21takAJrT5Dg6sYkjc3Nn94t2RkYD+y8KeYkjs/v7l5fz0dF22YkjWvcOLAAAAgElEQVR4AR2KNULFQBgGZ5J13KGGKvc/Cw1uPe62eb9+Jr1EUBFHSgxxjP2Eca6AfUSfVlUfBvm1Ui1bqafctqMndNkXpb01h5TLx4b6TIXgwOCHfjv+/Pz+5vPRw7txGWT2h6yO0/GaYltIp5PT1dEpLNPL/SdWjYjAAZtvRPgHJX4Xio+DSrkAAAAASUVORK5CYII=" alt="English" width="16" height="11" style="width: 16px; height: 11px;">
								<span style="margin-left:0.3em;">English</span>
							</a>
						</li>
						<li>
							<a lang="ro-RO" hreflang="ro-RO" href="../../siruri-de-caractere-si-procesarea-de-text/string-builder/">
								<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAALCAMAAABBPP0LAAAAbFBMVEUAJsgAFMT13wDyAgLqAAB4muX8/G3581z5Vlb3RkZagt78/Ef5+T/08Tn1NTX1KSlQe9709Ez5+TX36S71GxvkAABHdNv4+CvzDw8AA7lqjuFBcNn29h/05Rg6adnfAAAAAK3nvQDrwgDkqgALguDCAAAAX0lEQVR4ARXHtWEDQBAEwNmn4BMz9V+eIzsTS8c7EWqR2mQgkJDTYHIZ5cRRg7XJWjG9tLIypqmVV7k0aN8f1vTw3OXaNft5mwyyG7NTxi/5+WPFSdYpPA+fSG60/4074PMLPA8bHzoAAAAASUVORK5CYII=" alt="Română" width="16" height="11" style="width: 16px; height: 11px;">
								<span style="margin-left:0.3em;">Română</span>
							</a>
						</li>
					</ul>					
					<div class="mobile-menu-heading"> 
						Table of contents
					</div>
					<ul>
						<li>
							<a href="../../">
								<span>Contents</span>
							</a>
						</li>
					</ul>
					<div class="mobile-menu-heading"> 
						Chapters
					</div>
					<ul>
						<li>
							<a href="../../category/uncategorized/">
								<span>Uncategorized</span>
							</a>
						</li>
						<li>
							<a href="../../category/introduction/">
								<span>Introduction</span>
							</a>
						</li>
						<li>
							<a href="../../category/arrays/">
								<span>Arrays</span>
							</a>
						</li>
						<li>
							<a href="../../category/functions/">
								<span>Functions</span>
							</a>
						</li>
						<li>
							<a href="../../category/strings-and-text-processing/">
								<span>Strings And Text Processing</span>
							</a>
						</li>
						<li>
							<a href="../../category/objects/">
								<span>Objects</span>
							</a>
						</li>
						<li>
							<a href="../../category/graphical-user-interface/">
								<span>Graphical User Interface</span>
							</a>
						</li>
						<li>
							<a href="../../category/data-structures/">
								<span>Data Structures</span>
							</a>
						</li>
						<li>
							<a href="../../category/debugging-and-error-handling/">
								<span>Debugging And Error Handling</span>
							</a>
						</li>
						<li>
							<a href="../../category/first-practical-application/">
								<span>First Practical Application</span>
							</a>
						</li>
						<li>
							<a href="../../category/object-oriented-programming/">
								<span>Object Oriented Programming</span>
							</a>
						</li>
						<li>
							<a href="../../category/delegates-lambda-expressions-events/">
								<span>Delegates, Lambda Expressions, Events</span>
							</a>
						</li>
						<li>
							<a href="../../category/linq/">
								<span>LINQ</span>
							</a>
						</li>
					</ul>		
				</div>
			</nav>
        </label>         
        <div id="page">
			<div id="header">
				<div id="header-content-background">
					<div id="header-content">
						Follow the white rabbit...<i class="blinkingCursor"></i>
					</div>
				</div>
				<div id="header-separator">
					String Builder
				</div>
				<hr class="border-shine" style="margin-top: -32px;">
			</div>
			
			<hr class="border-lit">
			<div class="flex-container">
				<div id="content">
					<a href="../../" style="font-style: italic; color: #777777;">Table of contents</a><span style="color: #00ff00;"> >></span> 
					<a href="../../category/strings-and-text-processing/" style="font-style: italic; color: #777777;">Strings And Text Processing</a><span style="color: #00ff00;"> ></span> 
					<a href="./" style="font-style: italic; color: #777777;">String Builder</a>
					<br /><img class="medium-importance" title="Medium importance article" /><span style="color: #6DCBFE;">Medium importance article</span>

					<p>I was explaining at some point that <span class="inline-code using">string</span> is an <span class="programming-term">immutable</span> type. That means that once you assign a value to a <span class="inline-code using">string</span> variable, you cannot directly modify it anymore. This also means that any string operation using any function such as <span class="inline-code"><span class="method">Trim</span>()</span>, <span class="inline-code"><span class="method">Replace</span>()</span>, <span class="inline-code"><span class="method">ToUpper</span>()</span>, etc, will actually create a new string in memory, where the resulting value will be stored, and it will delete the old, initial value. This behavior is a very complex one, involving <span class="programming-term">pointers</span> and <a href="../../introduction/value-and-reference-types/">references</a>, and it has many advantages, but in some cases it can cause performance problems.</p>
					<p>The worst example of bad performance I can think of is the concatenation of strings inside a loop. <span class="error-term">NEVER</span> do that! We haven&#8217;t learn about the dynamic memory or the garbage collector yet, so I cannot fully explain the reasons why this results in such terrible performance, but still, let&#8217;s try to understand the reasons behind it. To understand them, we first need to understand what happens when we use the <span class="inline-code">+</span> or <span class="inline-code">+=</span> operators on strings. Let&#8217;s consider the following code:</p>

					<div class="code-block">		
						<div class="code-block-header">
							<span class="code-block-title"></span>
						</div>
						<div class="code-block-body">
							<table class="code-block-body-table">
								<tbody>
									<tr>
										<td class="line-numbers">
											<div class="line-numbers-content">
												<div>1</div>
												<div class="line-numbers-highlight">2</div>
												<div>3</div>
												<div class="line-numbers-highlight">4</div>
												<div>5</div>
												<div class="line-numbers-highlight">6</div>
												<div>7</div>
												<div class="line-numbers-highlight">8</div>
												<div>9</div>
												<div class="line-numbers-highlight">10</div>
												<div>11</div>
												<div class="line-numbers-highlight">12</div>
												<div>13</div>
												<div class="line-numbers-highlight">14</div>
												<div>15</div>
												<div class="line-numbers-highlight">16</div>
												<div>17</div>
											</div>
										</td>
										<td>
											<div class="code-pre">
												<div class="code-line">
													<span class="using">using</span>
													<span> System;</span>
												</div>

												<div class="code-line code-line-highlight">&nbsp;</div>

												<div class="code-line">
													<span class="using">namespace </span>
													<span>HelloWorld</span>
												</div>

												<div class="code-line code-line-highlight">
													{
												</div>

												<div class="code-line">
													<span class="vertical-dash-line"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="using">class </span>
													<span class="class-name">Program</span>
												</div>

												<div class="code-line code-line-highlight">
													<span class="vertical-dash-line"></span>&nbsp;&nbsp;&nbsp;&nbsp;{ 
												</div>

												<div class="code-line">
													<span class="vertical-dash-line"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="vertical-dash-line"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="using">static void </span><span class="method">Main</span>(<span class="using">string</span>[] <span class="param">args</span>)
												</div>

												<div class="code-line code-line-highlight">
													<span class="vertical-dash-line"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="vertical-dash-line"></span>&nbsp;&nbsp;&nbsp;&nbsp;{ 
												</div>

												<div class="code-line">
													<span class="vertical-dash-line"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="vertical-dash-line"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="vertical-dash-line"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="using">string</span> <span class="param">surname</span> = <span class="string">&quot;John &quot;</span>; 
												</div>

												<div class="code-line code-line-highlight">													
													<span class="vertical-dash-line"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="vertical-dash-line"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="vertical-dash-line"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="using">string</span> <span class="param">name</span> = <span class="string">&quot;Doe&quot;</span>;
												</div>

												<div class="code-line">													
													<span class="vertical-dash-line"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="vertical-dash-line"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="vertical-dash-line"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="using">string</span> <span class="param">completeName</span> = <span class="param">surname</span> + <span class="param">name</span>;
												</div>

												<div class="code-line code-line-highlight">													
													<span class="vertical-dash-line"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="vertical-dash-line"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="vertical-dash-line"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="param">completeName</span> = <span class="string">&quot;Jane&quot;</span>;
												</div>

												<div class="code-line">
													<span class="vertical-dash-line"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="vertical-dash-line"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="vertical-dash-line"></span>&nbsp;&nbsp;&nbsp;&nbsp;
												</div>

												<div class="code-line code-line-highlight">
													<span class="vertical-dash-line"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="vertical-dash-line"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="vertical-dash-line"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="class-name">Console</span>.<span class="method">ReadLine</span>();
												</div>

												<div class="code-line">
													<span class="vertical-dash-line"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="vertical-dash-line"></span>&nbsp;&nbsp;&nbsp;&nbsp;}
												</div>

												<div class="code-line code-line-highlight">
													<span class="vertical-dash-line"></span>&nbsp;&nbsp;&nbsp;&nbsp;} 
												</div>

												<div class="code-line">
													}
												</div>
											</div>
										</td>
									</tr>
								</tbody>
							</table>
						</div>
					</div>
					<p>What will happen in the memory? When we declare the <span class="inline-code param">surname</span> and <span class="inline-code param">name</span> variables, they will be stored in a special memory called the <a href="../../debugging-and-error-handling/stack-vs-heap-memory/">Heap</a>. When we <a href="../../strings-and-text-processing/concatenation/">concatenate</a> them, we assign the resulting value to a third variable. So, now we have three values in memory and three variables pointing to them, and this is the expected result. However, when we change the value of the already existing variable <span class="inline-code param">completeName</span>, we are actually allocating a new memory area, store the new string in it, and delete the string value that was located in the previous location. This process can take time, specially when repeated many, many times, like in a loop.</p>
					<p>In C#, we don&#8217;t have to worry about manually deleting the variable values that we no longer need, like in other languages, such as C or C++. There is a special component called <span class="programming-term">Garbage Collector</span> that automatically cleans up any unused resources, but this comes with a price: whenever it performs the cleaning, it takes quite some time and it overall slows down the execution speed. So, not only we force the GC to clean the memory all the time, we also make the program transfer characters from one place to another in memory (when string concatenation is executed), which is slow, especially if the strings are long.</p>
					<p>Let&#8217;s demonstrate this. Let&#8217;s concatenate the numbers from 0 to 200,000 in a string. The usual way of doing this would be like so:</p>

					<div class="code-block">		
						<div class="code-block-header">
							<span class="code-block-title"></span>
						</div>
						<div class="code-block-body">
							<table class="code-block-body-table">
								<tbody>
									<tr>
										<td class="line-numbers">
											<div class="line-numbers-content">
												<div>1</div>
												<div class="line-numbers-highlight">2</div>
												<div>3</div>
												<div class="line-numbers-highlight">4</div>
												<div>5</div>
												<div class="line-numbers-highlight">6</div>
												<div>7</div>
												<div class="line-numbers-highlight">8</div>
												<div>9</div>
												<div class="line-numbers-highlight">10</div>
												<div>11</div>
												<div class="line-numbers-highlight">12</div>
												<div>13</div>
												<div class="line-numbers-highlight">14</div>
												<div>15</div>
												<div class="line-numbers-highlight">16</div>
												<div>17</div>
												<div class="line-numbers-highlight">18</div>
												<div>19</div>
											</div>
										</td>
										<td>
											<div class="code-pre">
												<div class="code-line">
													<span class="using">using</span>
													<span> System;</span>
												</div>

												<div class="code-line code-line-highlight">&nbsp;</div>

												<div class="code-line">
													<span class="using">namespace </span>
													<span>HelloWorld</span>
												</div>

												<div class="code-line code-line-highlight">
													{
												</div>

												<div class="code-line">
													<span class="vertical-dash-line"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="using">class </span>
													<span class="class-name">Program</span>
												</div>

												<div class="code-line code-line-highlight">
													<span class="vertical-dash-line"></span>&nbsp;&nbsp;&nbsp;&nbsp;{ 
												</div>

												<div class="code-line">
													<span class="vertical-dash-line"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="vertical-dash-line"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="using">static void </span><span class="method">Main</span>(<span class="using">string</span>[] <span class="param">args</span>)
												</div>

												<div class="code-line code-line-highlight">
													<span class="vertical-dash-line"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="vertical-dash-line"></span>&nbsp;&nbsp;&nbsp;&nbsp;{ 
												</div>

												<div class="code-line">
													<span class="vertical-dash-line"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="vertical-dash-line"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="vertical-dash-line"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="class-name">Console</span>.<span class="method">WriteLine</span>(<span class="enum">DateTime</span>.Now); 
												</div>

												<div class="code-line code-line-highlight">
													<span class="vertical-dash-line"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="vertical-dash-line"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="vertical-dash-line"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="using">string</span> <span class="param">collector</span> = <span class="string">&quot;Numbers: &quot;</span>; 
												</div>

												<div class="code-line">													
													<span class="vertical-dash-line"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="vertical-dash-line"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="vertical-dash-line"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="if">for</span> (<span class="using">int</span> <span class="param">index</span> = <span class="literal">1</span>; <span class="param">index</span> &lt;= <span class="literal">200000</span>; <span class="param">index</span>++)
												</div>

												<div class="code-line code-line-highlight">													
													<span class="vertical-dash-line"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="vertical-dash-line"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="vertical-dash-line"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="param">collector</span> += <span class="param">index</span>;
												</div>

												<div class="code-line">
													<span class="vertical-dash-line"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="vertical-dash-line"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="vertical-dash-line"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="class-name">Console</span>.<span class="method">WriteLine</span>(<span class="param">collector</span>.<span class="method">Substring</span>(<span class="literal">0</span>, <span class="literal">1024</span>)); 
												</div>

												<div class="code-line code-line-highlight">
													<span class="vertical-dash-line"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="vertical-dash-line"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="vertical-dash-line"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="class-name">Console</span>.<span class="method">WriteLine</span>(<span class="enum">DateTime</span>.Now); 
												</div>

												<div class="code-line">
													<span class="vertical-dash-line"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="vertical-dash-line"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="vertical-dash-line"></span>&nbsp;&nbsp;&nbsp;&nbsp;
												</div>

												<div class="code-line code-line-highlight">
													<span class="vertical-dash-line"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="vertical-dash-line"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="vertical-dash-line"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="class-name">Console</span>.<span class="method">ReadLine</span>();
												</div>

												<div class="code-line">
													<span class="vertical-dash-line"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="vertical-dash-line"></span>&nbsp;&nbsp;&nbsp;&nbsp;}
												</div>

												<div class="code-line code-line-highlight">
													<span class="vertical-dash-line"></span>&nbsp;&nbsp;&nbsp;&nbsp;} 
												</div>

												<div class="code-line">
													}
												</div>
											</div>
										</td>
									</tr>
								</tbody>
							</table>
						</div>
					</div>
					<p>We display the current time at the moment we start the concatenation (though we didn&#8217;t learn about the <span class="inline-code enum">DateTime</span> object yet), then we perform the joining of the string inside the loop, and finally display the current time again, to be able to compare the elapsed time.</p>
					<div class="code-block">		
						<div class="terminal-header">
							<div class="terminal-title"></div>
						</div>
						<div class="code-block-body">
							<div class="code-pre terminal-pre">
								<div class="code-line">21/04/2017 08:53:00 AM</div>
								<div class="code-line">Numbers: 123456789101112131415161718192021222324252627282930313233343536373839404142</div>
								<div class="code-line">434445464748495051525354555657585960616263646566676869707172737475767778798081828384</div>
								<div class="code-line">858687888990919293949596979899100101102103104105106107108109110111112113114115116117</div>
								<div class="code-line">118119120121122123124125126127128129130131132133134135136137138139140141142143144145</div>
								<div class="code-line">146147148149150151152153154155156157158159160161162163164165166167168169170171172173</div>
								<div class="code-line">174175176177178179180181182183184185186187188189190191192193194195196197198199200201</div>
								<div class="code-line">202203204205206207208209210211212213214215216217218219220221222223224225226227228229</div>
								<div class="code-line">230231232233234235236237238239240241242243244245246247248249250251252253254255256257</div>
								<div class="code-line">258259260261262263264265266267268269270271272273274275276277278279280281282283284285</div>
								<div class="code-line">286287288289290291292293294295296297298299300301302303304305306307308309310311312313</div>
								<div class="code-line">314315316317318319320321322323324325326327328329330331332333334335336337338339340341</div>
								<div class="code-line">342343344345346347348349350351352353354355356357358359360361362363364365366367368369</div>
								<div class="code-line">3703713723733743</div>
								<div class="code-line">&nbsp;</div>
								<div class="code-line">21/04/2017 08:54:55 AM</div>
								<div class="code-line"><i class="terminal-blinkingCursor"></i></div>
								<div class="code-line">&nbsp;</div>
							</div>
						</div>
					</div>
					<p>As you can see, on an Intel Quad Core i5 4590 CPU, running at 3.3 GHz, this took almost two minutes. Some of you might say, &#8220;yeah, but still, there&#8217;s 200.000 operations to be performed! That has to take some time!&#8221;, and you would be wrong. Computers are VERY good at performing repeated, extremely fast operations, specially on modern nowadays CPU&#8217;s.</p>
					<p>But most importantly, in 2017, making your users wait 2 minutes for an operation is almost unacceptable, and many will close it before this gets a chance to complete.</p>
					<p>The problem with time-consuming loop processing is related to the way strings work in memory. Each iteration creates a new object in the Heap and point the reference to it, as I explained. This process requires a certain physical time.</p>
					<p>Several things happen at each step:</p>
					<p>1. An area of memory is allocated for recording the next number of concatenation result. This memory is used only temporarily while concatenating, and is called a <span class="programming-term">buffer</span>.<br />
					2. The old string is moved into the new buffer. If the string is long (say 500 KB, 5 MB or 50 MB), it can be quite slow!<br />
					3. Next number is concatenated to the buffer.<br />
					4. The buffer is converted to a string.<br />
					5. The old string and the temporary buffer become unused. Later they are destroyed by the Garbage Collector. This may also be a slow operation.</p>
					<p>A much more elegant and appropriate way to concatenate strings in a loop is using the <span class="inline-code class-name">StringBuilder</span> <a href="../../objects/classes/">class</a>. I know, we haven&#8217;t talked about classes yet, but don&#8217;t bother yourself with that. Let’s just see how it works. First, <span class="inline-code class-name">StringBuilder</span> is a class that serves to build and change strings. It overcomes the performance problems that arise when concatenating strings of type <span class="inline-code using">string</span>. The class is built in the form of an array of characters and what we need to know about it is that the information in it can be freely changed. Changes that are required in the variables of type <span class="inline-code class-name">StringBuilder</span>, are carried out in the same area of memory (buffer), which saves time and resources. Changing the content does not create a new object but simply changes the current one. Let’s rewrite the above code above in which we concatenated strings in a loop. Notice that the <span class="inline-code class-name">StringBuilder</span> type is declared in an external library called <span class="inline-code">System.Text</span>, so you will need to add another <span class="inline-code using">using</span> directive. If you remember, the operation previously took 2 minutes. Let’s measure how long will take the same operation if we use <span class="inline-code class-name">StringBuilder</span>:</p>

					<div class="code-block">		
						<div class="code-block-header">
							<span class="code-block-title"></span>
						</div>
						<div class="code-block-body">
							<table class="code-block-body-table">
								<tbody>
									<tr>
										<td class="line-numbers">
											<div class="line-numbers-content">
												<div>1</div>
												<div class="line-numbers-highlight">2</div>
												<div>3</div>
												<div class="line-numbers-highlight">4</div>
												<div>5</div>
												<div class="line-numbers-highlight">6</div>
												<div>7</div>
												<div class="line-numbers-highlight">8</div>
												<div>9</div>
												<div class="line-numbers-highlight">10</div>
												<div>11</div>
												<div class="line-numbers-highlight">12</div>
												<div>13</div>
												<div class="line-numbers-highlight">14</div>
												<div>15</div>
												<div class="line-numbers-highlight">16</div>
												<div>17</div>
												<div class="line-numbers-highlight">18</div>
												<div>19</div>
												<div class="line-numbers-highlight">20</div>
												<div>21</div>
											</div>
										</td>
										<td>
											<div class="code-pre">
												<div class="code-line">
													<span class="using">using</span>
													<span> System;</span>
												</div>
												<div class="code-line code-line-highlight">
													<span class="using">using</span>
													<span> System.Text;</span>
												</div>
												<div class="code-line">&nbsp;</div>

												<div class="code-line code-line-highlight">
													<span class="using">namespace </span>
													<span>HelloWorld</span>
												</div>

												<div class="code-line">
													{
												</div>

												<div class="code-line code-line-highlight">
													<span class="vertical-dash-line"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="using">class </span>
													<span class="class-name">Program</span>
												</div>

												<div class="code-line">
													<span class="vertical-dash-line"></span>&nbsp;&nbsp;&nbsp;&nbsp;{ 
												</div>

												<div class="code-line code-line-highlight">
													<span class="vertical-dash-line"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="vertical-dash-line"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="using">static void </span><span class="method">Main</span>(<span class="using">string</span>[] <span class="param">args</span>)
												</div>

												<div class="code-line">
													<span class="vertical-dash-line"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="vertical-dash-line"></span>&nbsp;&nbsp;&nbsp;&nbsp;{ 
												</div>

												<div class="code-line code-line-highlight">
													<span class="vertical-dash-line"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="vertical-dash-line"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="vertical-dash-line"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="class-name">Console</span>.<span class="method">WriteLine</span>(<span class="enum">DateTime</span>.Now); 
												</div>

												<div class="code-line">
													<span class="vertical-dash-line"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="vertical-dash-line"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="vertical-dash-line"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="class-name">StringBuilder</span> <span class="param">sb</span> = <span class="using">new</span> <span class="class-name">StringBuilder</span>(); 
												</div>

												<div class="code-line code-line-highlight">
													<span class="vertical-dash-line"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="vertical-dash-line"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="vertical-dash-line"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="param">sb</span>.<span class="method">Append</span>(<span class="string">&quot;Numbers: &quot;</span>); 
												</div>

												<div class="code-line">													
													<span class="vertical-dash-line"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="vertical-dash-line"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="vertical-dash-line"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="if">for</span> (<span class="using">int</span> <span class="param">index</span> = <span class="literal">1</span>; <span class="param">index</span> &lt;= <span class="literal">200000</span>; <span class="param">index</span>++)
												</div>

												<div class="code-line code-line-highlight">													
													<span class="vertical-dash-line"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="vertical-dash-line"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="vertical-dash-line"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="param">sb</span>.<span class="method">Append</span>(<span class="param">index</span>);
												</div>

												<div class="code-line">
													<span class="vertical-dash-line"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="vertical-dash-line"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="vertical-dash-line"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="class-name">Console</span>.<span class="method">WriteLine</span>(<span class="param">sb</span>.<span class="method">ToString</span>().<span class="method">Substring</span>(<span class="literal">0</span>, <span class="literal">1024</span>)); 
												</div>

												<div class="code-line code-line-highlight">
													<span class="vertical-dash-line"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="vertical-dash-line"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="vertical-dash-line"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="class-name">Console</span>.<span class="method">WriteLine</span>(<span class="enum">DateTime</span>.Now); 
												</div>

												<div class="code-line">
													<span class="vertical-dash-line"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="vertical-dash-line"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="vertical-dash-line"></span>&nbsp;&nbsp;&nbsp;&nbsp;
												</div>

												<div class="code-line code-line-highlight">
													<span class="vertical-dash-line"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="vertical-dash-line"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="vertical-dash-line"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="class-name">Console</span>.<span class="method">ReadLine</span>();
												</div>

												<div class="code-line">
													<span class="vertical-dash-line"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="vertical-dash-line"></span>&nbsp;&nbsp;&nbsp;&nbsp;}
												</div>

												<div class="code-line code-line-highlight">
													<span class="vertical-dash-line"></span>&nbsp;&nbsp;&nbsp;&nbsp;} 
												</div>

												<div class="code-line">
													}
												</div>
											</div>
										</td>
									</tr>
								</tbody>
							</table>
						</div>
					</div>
					<p>After running the code, we get this:</p>
					<div class="code-block">		
						<div class="terminal-header">
							<div class="terminal-title"></div>
						</div>
						<div class="code-block-body">
							<div class="code-pre terminal-pre">
								<div class="code-line">21/04/2017 08:59:59 AM</div>
								<div class="code-line">Numbers: 123456789101112131415161718192021222324252627282930313233343536373839404142</div>
								<div class="code-line">434445464748495051525354555657585960616263646566676869707172737475767778798081828384</div>
								<div class="code-line">858687888990919293949596979899100101102103104105106107108109110111112113114115116117</div>
								<div class="code-line">118119120121122123124125126127128129130131132133134135136137138139140141142143144145</div>
								<div class="code-line">146147148149150151152153154155156157158159160161162163164165166167168169170171172173</div>
								<div class="code-line">174175176177178179180181182183184185186187188189190191192193194195196197198199200201</div>
								<div class="code-line">202203204205206207208209210211212213214215216217218219220221222223224225226227228229</div>
								<div class="code-line">230231232233234235236237238239240241242243244245246247248249250251252253254255256257</div>
								<div class="code-line">258259260261262263264265266267268269270271272273274275276277278279280281282283284285</div>
								<div class="code-line">286287288289290291292293294295296297298299300301302303304305306307308309310311312313</div>
								<div class="code-line">314315316317318319320321322323324325326327328329330331332333334335336337338339340341</div>
								<div class="code-line">342343344345346347348349350351352353354355356357358359360361362363364365366367368369</div>
								<div class="code-line">3703713723733743</div>
								<div class="code-line">&nbsp;</div>
								<div class="code-line">21/04/2017 08:59:59 AM</div>
								<div class="code-line"><i class="terminal-blinkingCursor"></i></div>
								<div class="code-line">&nbsp;</div>
							</div>
						</div>
					</div>
					<p>I don&#8217;t know about you, but 200.000 operations in less than a second, now, that&#8217;s what I call a performance increase! The required time is actually in the order of milliseconds!</p>
					<p>The way we use <span class="inline-code class-name">StringBuilder</span> is by creating a new <a href="../../objects/instantiation/">instance</a> of it, and then use the <span class="inline-code"><span class="method">Append</span>()</span> method to concatenate strings to it. You will better understand this process when you will learn the next chapter. For the time being, just remember that <span class="inline-code class-name">StringBuilder</span> is a MUCH more efficient way of concatenating strings.</p>
					
					<p>&nbsp;</p>

					<div id="content-footer">
						<p>Tags: <span style="color: rgb(190, 105, 104);">
							concatenation, concatenator operator, string operations, string variable type, stringbuilder
						</span>
						</p>
						<small>
						This entry was posted on Friday, April 21st, 2017 at 09:08 and is filed under <a href="../../category/strings-and-text-processing/" rel="category tag">Strings And Text Processing</a>.
						</small>
					</div>

					<div class="navigation">
						<div class="alignleft">« <a href="../../strings-and-text-processing/other-string-methods/" rel="prev">Other string methods</a></div>
						<div class="alignright"><a href="../../objects/object-oriented-programming/" rel="next">Object oriented programming</a> »</div>
					</div>
				</div>
				<nav id="sidebar">
					<div id="sidebar-content">
						<div class="mobile-menu-heading" style="font-size:20px;height:25px;"> 
							Read this in
						</div>
						<ul>
							<li>
								<a lang="en-US" hreflang="en-US" href="../../strings-and-text-processing/string-builder/" style="background: transparent;">
									<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAALCAMAAABBPP0LAAAAmVBMVEViZsViZMJiYrf9gnL8eWrlYkjgYkjZYkj8/PujwPybvPz4+PetraBEgfo+fvo3efkydfkqcvj8Y2T8UlL8Q0P8MzP9k4Hz8/Lu7u4DdPj9/VrKysI9fPoDc/EAZ7z7IiLHYkjp6ekCcOTk5OIASbfY/v21takAJrT5Dg6sYkjc3Nn94t2RkYD+y8KeYkjs/v7l5fz0dF22YkjWvcOLAAAAgElEQVR4AR2KNULFQBgGZ5J13KGGKvc/Cw1uPe62eb9+Jr1EUBFHSgxxjP2Eca6AfUSfVlUfBvm1Ui1bqafctqMndNkXpb01h5TLx4b6TIXgwOCHfjv+/Pz+5vPRw7txGWT2h6yO0/GaYltIp5PT1dEpLNPL/SdWjYjAAZtvRPgHJX4Xio+DSrkAAAAASUVORK5CYII=" alt="English" width="16" height="11" style="width: 16px; height: 11px;">
									<span style="margin-left:0.3em;">English</span>
								</a>
							</li>
							<li>
								<a lang="ro-RO" hreflang="ro-RO" href="../../siruri-de-caractere-si-procesarea-de-text/string-builder/" style="background: transparent;">
									<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAALCAMAAABBPP0LAAAAbFBMVEUAJsgAFMT13wDyAgLqAAB4muX8/G3581z5Vlb3RkZagt78/Ef5+T/08Tn1NTX1KSlQe9709Ez5+TX36S71GxvkAABHdNv4+CvzDw8AA7lqjuFBcNn29h/05Rg6adnfAAAAAK3nvQDrwgDkqgALguDCAAAAX0lEQVR4ARXHtWEDQBAEwNmn4BMz9V+eIzsTS8c7EWqR2mQgkJDTYHIZ5cRRg7XJWjG9tLIypqmVV7k0aN8f1vTw3OXaNft5mwyyG7NTxi/5+WPFSdYpPA+fSG60/4074PMLPA8bHzoAAAAASUVORK5CYII=" alt="Română" width="16" height="11" style="width: 16px; height: 11px;">
									<span style="margin-left:0.3em;">Română</span>
								</a>
							</li>
						</ul>					
						<div class="mobile-menu-heading" style="font-size:20px;height:25px;"> 
							Table of contents
						</div>
						<ul>
							<li>
								<a href="../../">
									<span>Contents</span>
								</a>
							</li>
						</ul>
						<div class="mobile-menu-heading" style="font-size:20px;height:25px;"> 
							Chapters
						</div>
						<ul>
							<li>
								<a href="../../category/uncategorized/">
									<span>Uncategorized</span>
								</a>
							</li>
							<li>
								<a href="../../category/introduction/">
									<span>Introduction</span>
								</a>
							</li>
							<li>
								<a href="../../category/arrays/">
									<span>Arrays</span>
								</a>
							</li>
							<li>
								<a href="../../category/functions/">
									<span>Functions</span>
								</a>
							</li>
							<li>
								<a href="../../category/strings-and-text-processing/">
									<span>Strings And Text Processing</span>
								</a>
							</li>
							<li>
								<a href="../../category/objects/">
									<span>Objects</span>
								</a>
							</li>
							<li>
								<a href="../../category/graphical-user-interface/">
									<span>Graphical User Interface</span>
								</a>
							</li>
							<li>
								<a href="../../category/data-structures/">
									<span>Data Structures</span>
								</a>
							</li>
							<li>
								<a href="../../category/debugging-and-error-handling/">
									<span>Debugging And Error Handling</span>
								</a>
							</li>
							<li>
								<a href="../../category/first-practical-application/">
									<span>First Practical Application</span>
								</a>
							</li>
							<li>
								<a href="../../category/object-oriented-programming/">
									<span>Object Oriented Programming</span>
								</a>
							</li>
							<li>
								<a href="../../category/delegates-lambda-expressions-events/">
									<span>Delegates, Lambda Expressions, Events</span>
								</a>
							</li>
							<li>
								<a href="../../category/linq/">
									<span>LINQ</span>
								</a>
							</li>
						</ul>	
					</div>
				</nav>
			</div>				
            <div id="footer">
                <div id="footer-content">This website <span style="color: #6DCBFE;">DOES NOT</span> use JavaScript. Because some people prefer it disabled, and it respects their choice. It <span style="color: #6DCBFE;">DOES NOT</span> use cookies, of any kind and you don't have to click through countless agreements. It has no reason to, 
				and, no, there is no such thing as "mandatory cookies" or "legitimate interest" to "function properly". This website <span style="color: #6DCBFE;">DOES NOT</span> display ads. Neither does it sell anything. You don't have 
				to register, subscribe, purchase or donate anything. Not everything is about greed and more profit. This website is <strong style="color: #ff0000;">strongly</strong> against social media. It <span style="color: #6DCBFE;">DOES NOT</span> embed any Facebook, Google, 
				Twitter or any other company's code inside it. It <span style="color: #6DCBFE;">DOES NOT</span> track users, harvests data or collects statistics. 
				The materials and information on this website can be used freely, except for the explicitly specified cases. You do have to specify the source though, in any other case other than personal use.
				The comments unrelated to the posts will be considered spam and deleted. I reserve the right of not answering or approving the comments. For comments, questions or suggestions, email me at <a href="mailto:rusoaica@gmail.com">rusoaica@gmail.com</a>. Thank you!</br>
				<span style="color: #6DCBFE;">Design, content and articles &copy;rusoaica 2012-2023</span>
                </div>
            </div>
        </div>
        <div class="overlay"/>
    </body>
</html>
